let isDesktop=()=>770<=window.innerWidth,menu=document.querySelector(".menu"),menuBtn=document.getElementById("menu-btn"),showMenu=e=>{e=e();menu.ariaExpanded=e?"undefined":"false",menu.style.display=e?"flex":"none"},sttBtn=document.getElementById("stt-btn"),touch=window.matchMedia("(pointer: coarse)").matches,spotlight=document.querySelector(".spotlight--outer"),dataCache=null,langNav=document.getElementById("langNav"),langNavBtn=document.getElementById("langNavBtn");function initNavToggle(e,t){var n=Array.from(document.querySelectorAll(".menu__link"));let a=document.querySelector(".nav-overlay"),r=!1,i=()=>{r=!r,(menu.ariaExpanded=r)?(document.body.addEventListener("wheel",o,{passive:!1}),menuBtn.ariaLabel=t.menu_btn.close["aria-label"],menu.style.display="block",a.addEventListener("click",i,{once:!0})):(document.body.removeEventListener("wheel",o,{passive:!1}),menuBtn.ariaLabel=t.menu_btn.open["aria-label"],menu.addEventListener("animationend",()=>{r||(menu.style.display="none")},{once:!0}))};function o(e){e.preventDefault()}showMenu(e),menuBtn.addEventListener("click",i),n.forEach(e=>e.addEventListener("click",()=>{"undefined"!==menu.ariaExpanded&&i()}))}let animationObserver=null;function initAnimationObserver(){return animationObserver=animationObserver||new IntersectionObserver((e,n)=>{e.forEach(e=>{var t;(e.isIntersecting||e.target.id)&&(e.target.classList.add("animate"),e.target.classList.contains("contact")&&e.isIntersecting&&((t=document.createElement("script")).src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.12.2/lottie.min.js",t.onload=()=>{bodymovin.loadAnimation({container:document.getElementById("cat-animation"),path:"./assets/cat-animation.json",renderer:"svg",loop:!0,autoplay:!0,name:"cat animation"})},document.body.appendChild(t)),n.unobserve(e.target))})},{threshold:.4})}function scrollToTop(){700<document.body.scrollTop||700<document.documentElement.scrollTop?sttBtn.classList.add("active"):sttBtn.classList.remove("active")}function initSpotlightCursor(){document.addEventListener("mousemove",function(e){var t=document.querySelector(".spotlight--outer");t.animate({top:e.pageY+"px",left:e.pageX+"px"},{duration:500,fill:"forwards"})})}async function fetchGalleryData(){if(!dataCache){var e=await fetch("./assets/gallery-data.json");if(!e.ok)throw new Error("HTTP error, status = "+e.status);e=(await e.json()).cards;dataCache=e}return dataCache}function setupLangNavEvents(n){let a=!1;function t(e){var t=document.getElementById("langMenu");"LI"!==e.target.tagName&&(a=!a,(langNav.ariaExpanded=a)?(t.removeAttribute("inert"),langNavBtn.ariaLabel=n.lang_nav_btn.close["aria-label"]):(t.setAttribute("inert",""),langNavBtn.ariaLabel=n.lang_nav_btn.open["aria-label"]))}isDesktop()?(langNavBtn.addEventListener("click",e=>t(e)),langNav.removeEventListener("click",t),langNav.removeEventListener("keypress",e=>{"Enter"===e.key&&t(e)}),langNav.setAttribute("tabindex","-1"),langNav.removeAttribute("role"),langNavBtn.setAttribute("tabindex","0"),langNavBtn.setAttribute("aria-hidden","true")):(langNavBtn.removeEventListener("click",t),langNav.addEventListener("click",e=>t(e)),langNav.addEventListener("keypress",e=>{"Enter"===e.key&&t(e)}),langNav.setAttribute("tabindex","0"),langNav.setAttribute("role","button"),langNavBtn.setAttribute("tabindex","-1"),langNavBtn.setAttribute("aria-hidden","false"))}async function translationSetup(){let t=await(async e=>{try{var t=await fetch(`./languages/${e}.json`);if(t.ok)return await t.json();throw new Error("HTTP error, status = "+t.status)}catch(e){return console.error("Error loading language file:",e),{}}})(localStorage.getItem("language")||"en");function n(e){var n,t=document.querySelectorAll("[data-i18l]");let a=new Map;for(n in t.forEach(e=>{var t=e.getAttribute("data-i18l");a.has(t)?a.get(t).push(e):a.set(t,[e])}),e){var r=a.get(n);let t=e[n];if(r)if("object"==typeof t&&"open"in t)r[0].ariaLabel=t.open["aria-label"];else if("string"==typeof t)r[0].innerHTML=t;else if("object"!=typeof t||null===t||Array.isArray(t)){if(Array.isArray(t)){s=l=o=i=void 0;var i=r,o=t;for(let e=0;e<o.length;e++){var l=o[e],s=i[e];"object"==typeof l?c(s,l):"string"==typeof l&&(s.innerHTML=l)}}}else r.forEach(e=>c(e,t))}function c(e,t){for(var n in t){var a=t[n];"innerHTML"===n?e.innerHTML=a:e.setAttribute(n,a)}}}async function a(e){e=e.target.lang;localStorage.setItem("language",e),location.reload(),n(t)}return n(t),langNav.firstElementChild.querySelectorAll("li a").forEach(e=>{e.addEventListener("click",a)}),setupLangNavEvents(t),t}export{isDesktop,menu,menuBtn,showMenu,sttBtn,touch,spotlight,dataCache,initNavToggle,initAnimationObserver,scrollToTop,initSpotlightCursor,fetchGalleryData,setupLangNavEvents,translationSetup};